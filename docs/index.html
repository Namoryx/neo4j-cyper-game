<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>쿼카와 함께하는 Cypher 게임</title>
    <script type="module" crossorigin src="/neo4j-cyper-game/assets/app.js"></script>
    <link rel="stylesheet" crossorigin href="/neo4j-cyper-game/assets/app.css">
  </head>
  <body>
    <div id="root"></div>
    <script>
      const entryScript = document.getElementById('vite-entry');
      const isLocalDev = ['localhost', '127.0.0.1', '[::1]'].includes(location.hostname);
      const base = window.__APP_BASE__ || (location.pathname.includes('/neo4j-cyper-game/') ? '/neo4j-cyper-game/' : '/');

      const loadProdBundle = () => {
        if (!document.querySelector(`link[href="${base}assets/app.css"]`)) {
          const cssLink = document.createElement('link');
          cssLink.rel = 'stylesheet';
          cssLink.href = `${base}assets/app.css`;
          document.head.appendChild(cssLink);
        }

        const prodScript = document.createElement('script');
        prodScript.type = 'module';
        prodScript.src = `${base}assets/app.js`;
        document.body.appendChild(prodScript);
      };

      if (!isLocalDev && entryScript) {
        entryScript.addEventListener('error', loadProdBundle, { once: true });
      }
    </script>
  </body>
</html>
